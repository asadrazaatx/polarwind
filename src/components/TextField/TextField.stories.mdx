import { useState } from "react";
import {
  Meta,
  Story,
  Props,
  Description,
  Preview,
} from "@storybook/addon-docs/blocks";
import { withSmartKnobs } from "storybook-addon-smart-knobs";
import { TextField } from "./TextField";
import { Stack } from "../Stack";

<Meta
  title="Components | Forms / Text field"
  component={TextField}
  decorators={[
    withSmartKnobs({ ignoreProps: ["children", "value", "helpText"] }),
  ]}
/>

# Text field

<Description of={TextField} />

<Preview withToolbar>
  <Story name="Text field">
    {() => {
      const [value, setValue] = useState("Esteban Arango");
      // prettier-ignore
      return <TextField label="Name" required helpText="Help me out" value={value} onChange={setValue} />
    }}
  </Story>
</Preview>

<Props of={TextField} />

# Usage

## Text field with validation error

When the `error` prop is set, the field will display an error state. The error message
will take precedence over the `success` and `helpText` if set.

<Preview>
  <Story name="Text field with validation error">
    <TextField
      label="Name"
      error="Name can't be empty"
      success="Saved" // not shown
      helpText="Help me out" // not shown
      required
    />
  </Story>
</Preview>

## Text field with success

When the `success` prop is set, the field will display the success message below the
field. The success message will take precedence over the `helpText` if set.

<Preview>
  <Story name="Text field with success">
    <TextField
      label="Name"
      success="Saved"
      helpText="Help me out" // not shown
    />
  </Story>
</Preview>

## Search field

Search fields automatically get the rounded borders and hidden label. You will still need
to set the `label` prop which will be used for the placeholder instead. Screen readers
will still be able to read the visually hidden label.

<Preview>
  <Story name="Search field">
    <TextField type="search" label="Search" />
  </Story>
</Preview>

## Focused state

Forces the focused state of the text fields.

<Preview>
  <Story name="Focused">
    <Stack vertical>
      <TextField label="Name" focused />
      <TextField label="Name" error="Bad news" focused />
      <TextField type="search" label="Search" focused />
    </Stack>
  </Story>
</Preview>

## Disabled state

The disabled state makes an input read-only. In the unlikely scenario where a validation
error input is also disabled, the disabled state overrides the error state.

<Preview>
  <Story name="Disabled">
    <Stack vertical distribution="equalSpacingAround">
      <TextField
        label="Input with a value"
        value="Hello, world"
        focused
        disabled
      />
      <TextField
        label="Username (with error)"
        error="Username can't be empty"
        helpText="Choose a unique username"
        focused
        disabled
      />
      <TextField type="search" label="Search" focused disabled />
    </Stack>
  </Story>
</Preview>

## Multiline text field

Use when the expected input could be more than one line. The field will automatically grow
to accommodate additional text.

<Preview>
  <Story name="Multiline">
    <Stack vertical>
      <TextField
        label="Default multiline"
        helpText="Be as detailed as possible"
        multiline
      />
      <TextField label="Multiline set to a number" multiline={3} />
      <TextField
        label="Error multiline"
        error="Enter a valid address"
        multiline
      />
      <TextField
        label="Disabled multiline"
        disabled
        multiline
        value={`The default rows attribute is set to 2
but this textarea has an initial value
which will resize itself to fit
all four rows`}
      />
    </Stack>
  </Story>
</Preview>

### Hidden label

<Preview>
  <Story name="Hidden label">
    <TextField label="Name" labelHidden />
  </Story>
</Preview>
